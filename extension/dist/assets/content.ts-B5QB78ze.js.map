{"version":3,"file":"content.ts-B5QB78ze.js","sources":["../../src/content.ts"],"sourcesContent":["function ensurePanel(): HTMLElement {\n  const existing = document.getElementById(\"__mastra_panel\");\n  if (existing) return existing as HTMLElement;\n\n  const host = document.createElement(\"div\");\n  host.id = \"__mastra_panel\";\n  host.style.position = \"fixed\";\n  host.style.top = \"0\";\n  host.style.right = \"0\";\n  host.style.height = \"100%\";\n  host.style.width = \"420px\";\n  host.style.maxWidth = \"min(90vw, 480px)\";\n  host.style.zIndex = \"2147483647\";\n  host.style.background = \"#f6f7fb\";\n  host.style.borderLeft = \"1px solid #e5e7eb\";\n  host.style.boxShadow = \"-8px 0 24px rgba(17,24,39,0.06)\";\n  host.style.display = \"none\";\n\n  const shadow = host.attachShadow({ mode: \"open\" });\n  const wrapper = document.createElement(\"div\");\n  wrapper.style.height = \"100%\";\n  wrapper.style.width = \"100%\";\n  wrapper.style.display = \"flex\";\n  wrapper.style.flexDirection = \"column\";\n\n  const bar = document.createElement(\"div\");\n  bar.style.height = \"40px\";\n  bar.style.display = \"flex\";\n  bar.style.alignItems = \"center\";\n  bar.style.justifyContent = \"space-between\";\n  bar.style.padding = \"0 10px\";\n  bar.style.background = \"#ffffff\";\n  bar.style.color = \"#111827\";\n  bar.style.borderBottom = \"1px solid #e5e7eb\";\n\n  const title = document.createElement(\"div\");\n  title.style.fontWeight = \"600\";\n  // label + version + email\n  const label = document.createElement(\"span\");\n  label.textContent = \"Agent n8n\";\n  const ver = document.createElement(\"span\");\n  ver.textContent = \"v0.1\";\n  ver.style.fontSize = \"11px\";\n  ver.style.color = \"#6b7280\";\n  ver.style.marginLeft = \"6px\";\n  ver.style.verticalAlign = \"middle\";\n  const emailEl = document.createElement(\"span\");\n  emailEl.style.fontSize = \"11px\";\n  emailEl.style.color = \"#6b7280\";\n  emailEl.style.marginLeft = \"8px\";\n  try {\n    // @ts-ignore - promise-based get (MV3)\n    chrome.storage?.local?.get?.([\"user\"])?.then?.((stored: any) => {\n      const email = stored?.user?.email || \"\";\n      if (email) emailEl.textContent = `— ${email}`;\n    })?.catch?.(() => {});\n  } catch {}\n  title.append(label, ver, emailEl);\n  const close = document.createElement(\"button\");\n  close.textContent = \"×\";\n  close.style.background = \"transparent\";\n  close.style.border = \"none\";\n  close.style.color = \"#111827\";\n  close.style.fontSize = \"20px\";\n  close.style.cursor = \"pointer\";\n  close.addEventListener(\"click\", () => (host.style.display = \"none\"));\n  bar.append(title, close);\n\n  const frame = document.createElement(\"iframe\");\n  // @ts-ignore\n  const url = chrome.runtime.getURL(\"popup.html\");\n  frame.src = url;\n  frame.style.border = \"0\";\n  frame.style.width = \"100%\";\n  frame.style.height = \"calc(100% - 40px)\";\n  frame.style.background = \"transparent\";\n\n  wrapper.append(bar, frame);\n  shadow.appendChild(wrapper);\n  document.documentElement.appendChild(host);\n  return host;\n}\n\n// Floating button removed: toolbar + side panel become primary entry\nfunction injectButton() { return null as any; }\n\n// Initialize only on toolbar click via background message\ntry {\n  chrome.runtime.onMessage.addListener((message) => {\n    if (message?.type === \"toggle-panel\") {\n      const panel = ensurePanel();\n      panel.style.display = panel.style.display === \"none\" ? \"block\" : \"none\";\n    } else if (message?.type === \"close-panel\") {\n      const panel = document.getElementById(\"__mastra_panel\") as HTMLElement | null;\n      if (panel) panel.style.display = \"none\";\n    }\n  });\n} catch {}\n\n\n"],"names":["ensurePanel","_a","_b","_c","_d","_e","_f","_g","existing","host","shadow","wrapper","bar","title","label","ver","emailEl","stored","email","close","frame","url","message","panel"],"mappings":"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"}